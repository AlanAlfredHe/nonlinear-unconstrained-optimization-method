function hessian = triangle_hessian(X,r)
    x1 = X(1);
    x2 = X(2);
    x3 = X(3);
    
    df_x1x1 = r/((x1 - x2)^2 + (x1 - x3)^2 + r^2)^(1/2) - (r*(2*x2 - 4*x1 + 2*x3)^2)/(8*((x1 - x2)^2 + (x1 - x3)^2 + r^2)^(3/2));
    df_x1x2 = - r/(2*((x1 - x2)^2 + (x1 - x3)^2 + r^2)^(1/2)) - (r*(2*x1 - 2*x2)*(2*x2 - 4*x1 + 2*x3))/(8*((x1 - x2)^2 + (x1 - x3)^2 + r^2)^(3/2));
    df_x1x3 = - r/(2*((x1 - x2)^2 + (x1 - x3)^2 + r^2)^(1/2)) - (r*(2*x1 - 2*x3)*(2*x2 - 4*x1 + 2*x3))/(8*((x1 - x2)^2 + (x1 - x3)^2 + r^2)^(3/2));
    df_x2x1 = - r/(2*((x1 - x2)^2 + (x1 - x3)^2 + r^2)^(1/2)) - (r*(2*x1 - 2*x2)*(2*x2 - 4*x1 + 2*x3))/(8*((x1 - x2)^2 + (x1 - x3)^2 + r^2)^(3/2));
    df_x2x2 = r/(2*((x1 - x2)^2 + (x1 - x3)^2 + r^2)^(1/2)) - (r*(2*x1 - 2*x2)^2)/(8*((x1 - x2)^2 + (x1 - x3)^2 + r^2)^(3/2));
    df_x2x3 = -(r*(2*x1 - 2*x2)*(2*x1 - 2*x3))/(8*((x1 - x2)^2 + (x1 - x3)^2 + r^2)^(3/2));
    df_x3x1 = - r/(2*((x1 - x2)^2 + (x1 - x3)^2 + r^2)^(1/2)) - (r*(2*x1 - 2*x3)*(2*x2 - 4*x1 + 2*x3))/(8*((x1 - x2)^2 + (x1 - x3)^2 + r^2)^(3/2));
    df_x3x2 = -(r*(2*x1 - 2*x2)*(2*x1 - 2*x3))/(8*((x1 - x2)^2 + (x1 - x3)^2 + r^2)^(3/2));
    df_x3x3 = r/(2*((x1 - x2)^2 + (x1 - x3)^2 + r^2)^(1/2)) - (r*(2*x1 - 2*x3)^2)/(8*((x1 - x2)^2 + (x1 - x3)^2 + r^2)^(3/2));
  
    hessian = [ df_x1x1,df_x1x2,df_x1x3;
                df_x2x1,df_x2x2,df_x2x3;
                df_x3x1,df_x3x2,df_x3x3];
end

